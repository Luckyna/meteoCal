<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
       xmlns:h="http://xmlns.jcp.org/jsf/html"
       xmlns:f="http://java.sun.com/jsf/core"
       xmlns:p="http://primefaces.org/ui"
       xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="/template.xhtml">

        <f:metadata>
            <f:viewParam name="id" value="#{scheduleView.userId}"/>
            <f:viewAction action="#{scheduleView.setUser}"/>
        </f:metadata>

        <ui:define name="title">calendar</ui:define>

        <ui:define name="content">

            <h:form>
                <h:panelGrid columnClasses="value">
                    <h:form>

                        <p:toolbar style="margin-bottom: 12px">
                            <f:facet name="left">
                                <h:panelGrid columns="2">
                                    <p:outputLabel for="console" value="Calendar:"/>
                                    <p:selectOneMenu id="console" value="#{scheduleView.calendarSelected}" style="width:125px">
                                        <c:forEach items="#{scheduleView.calendarNames}" var="c">
                                            <p:ajax listener="#{scheduleView.onCalendarChange}" update="schedule,publicSwitch" />
                                            <f:selectItem itemLabel="#{c}" itemValue="#{c}" />
                                        </c:forEach>
                                    </p:selectOneMenu>
                                </h:panelGrid>
                            </f:facet>
                            <f:facet name="right">
                                <h:panelGrid columns="2">
                                    <p:commandButton value="Delete #{scheduleView.calendarSelected}" icon="ui-icon-close" update=":growl">
                                        <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                                    </p:commandButton>

                                    <h:panelGrid columns="2">
                                        <p:outputLabel for="publicSwitch" value="Public:"/>
                                        <p:inputSwitch id="publicSwitch" value="#{scheduleView.calendarShown.isPublic}"/> <!--onchange-->
                                    </h:panelGrid>
                                </h:panelGrid>

                                <p:confirmDialog global="true">
                                    <p:commandButton value="Yes" icon="ui-icon-check" />
                                    <p:commandButton value="No" icon="ui-icon-close" />
                                </p:confirmDialog>

                            </f:facet>
                        </p:toolbar>

                        <p:schedule id="schedule" value="#{scheduleView.eventsToShow}" widgetVar="myschedule" timeZone="GMT+2">

                            <p:ajax event="dateSelect" listener="#{scheduleView.onDateSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                            <p:ajax event="eventSelect" listener="#{scheduleView.onEventSelect}" />
                            <p:ajax event="eventMove" listener="#{scheduleView.onEventMove}" update=":growl" />
                            <p:ajax event="eventResize" listener="#{scheduleView.onEventResize}" update=":growl" />

                        </p:schedule>


                        <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="clip" hideEffect="clip">
                            <h:panelGrid id="eventDetails" columns="2">
                                <h:outputLabel for="title" value="Title:" />
                                <p:inputText id="title" value="#{scheduleView.event.title}" required="true" />

                                <h:outputLabel for="from" value="From:" />
                                <p:inputMask id="from" value="#{scheduleView.event.startDate}" mask="99/99/9999">
                                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT+2"/>
                                </p:inputMask>

                                <h:outputLabel for="to" value="To:" />
                                <p:inputMask id="to" value="#{scheduleView.event.endDate}" mask="99/99/9999">
                                    <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT+2"/>
                                </p:inputMask>

                                <h:outputLabel for="allDay" value="All Day:" />
                                <h:selectBooleanCheckbox id="allDay" value="#{scheduleView.event.allDay}" />

                                <p:commandButton type="reset" value="Reset" />
                                <p:commandButton id="addButton" value="Save" actionListener="#{scheduleView.updateEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />

                            </h:panelGrid>
                        </p:dialog>   
                    </h:form>
                </h:panelGrid>
            </h:form>


            <script type="text/javascript">
                PrimeFaces.locales['tr'] = {
                    closeText: 'kapat',
                    prevText: 'geri',
                    nextText: 'ileri',
                    currentText: 'bugün',
                    monthNames: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran',
                        'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
                    monthNamesShort: ['Oca', 'Şub', 'Mar', 'Nis', 'May', 'Haz',
                        'Tem', 'Ağu', 'Eyl', 'Eki', 'Kas', 'Ara'],
                    dayNames: ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'],
                    dayNamesShort: ['Pz', 'Pt', 'Sa', 'Ça', 'Pe', 'Cu', 'Ct'],
                    dayNamesMin: ['Pz', 'Pt', 'Sa', 'Ça', 'Pe', 'Cu', 'Ct'],
                    weekHeader: 'Hf',
                    firstDay: 1,
                    isRTL: false,
                    showMonthAfterYear: false,
                    yearSuffix: '',
                    month: 'Ay',
                    week: 'Hafta',
                    day: 'Gün',
                    allDayText: 'Tüm Gün'
                };
            </script>



            <style type="text/css">
                .value {
                    width: 1000px;
                }
            </style>
        </ui:define>

    </ui:composition>
</html>
