<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://java.sun.com/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition template="/template.xhtml">

        <ui:define name="title">
            settings
        </ui:define>
        <ui:define name="content">
            <h1>Settings</h1>
            <h:form>

                <h2> Change Personal Info: </h2>

                <h:outputLabel>Name, Surname:</h:outputLabel> 

                <p:inputText id="name" value="#{settings.name}" pt:required="" />

                <p:inputText id="surname" value="#{settings.surname}" pt:required=""/><br/>

                <h:outputLabel for="email">Email:</h:outputLabel> 

                <p:inputText id="email" value="#{settings.email}" pt:required="">
                    <f:passThroughAttribute name="type" value="email" />
                </p:inputText>

                <h2> Change Password: </h2>
                <h:panelGrid columns="2">
                    <h:outputLabel>Old Password:</h:outputLabel> 
                    <p:password id="oldPassword" />

                    <h:outputLabel>New Password:</h:outputLabel> 
                    <p:password id="newPassword1" />

                    <h:outputLabel>Repeat Password:</h:outputLabel> 
                    <p:password id="newPassword2" />
                </h:panelGrid>
                <br/>
                <p:commandButton id="save" value="Save" action="#{settings.save}"/>

                <p:commandButton id="cancel" value="Cancel" action="#{settings.clear}"/>
            </h:form>
            <hr/>
            <h2> Export Calendar: </h2>
            <h:form>
                <p:selectOneMenu value="#{settings.calendarToExport}">
                    <c:forEach items="#{calendar.calendarNames}" var="cal">
                        <f:selectItem itemValue="#{cal}" itemLabel="#{cal}" />
                    </c:forEach>
                </p:selectOneMenu>
                <p:commandButton icon="ui-icon-arrowthickstop-1-s" id="export" value="Export" action="#{settings.exportCalendar}"/>
            </h:form>
            <h2> Import Calendar: </h2>
            <h:form>
                <p:fileUpload value="#{settings.calendarToImport}" mode="simple" allowTypes=".csv" />
                <p:commandButton id="import" value="Import" action="#{settings.importCalendar}"/>
            </h:form>
            <hr/>
            <h2> Delete Account</h2>
            <p>Please be aware that once the account has been deleted, it will not be possible to reactivate
            it later or retrieve calendars and events you have created. If you still wish to delete your account,
            click on "Delete my Account"</p>
            <p:commandButton id="delete" value="Delete my Account" action="#{settings.deleteAccount}"/>
        </ui:define>
    </ui:composition>
</html>
